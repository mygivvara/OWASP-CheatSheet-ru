# Шпаргалка по безопасному дизайну продукта

## Вступление

Целью разработки безопасного продукта является обеспечение того, чтобы все продукты соответствовали требованиям безопасности, установленным организацией в рамках жизненного цикла разработки, или превосходили их, а также обеспечение того, чтобы все решения по обеспечению безопасности, принимаемые в отношении разрабатываемого продукта, были четким выбором и обеспечивали надлежащий уровень безопасности разрабатываемого продукта.

## Методология

Для начала установите безопасные настройки по умолчанию, сведите к минимуму площадь поверхности атаки и обеспечьте надежное выполнение этих четко определенных и понятных настроек по умолчанию.

Разработка безопасного продукта осуществляется с помощью двух процессов:

1. **_Разработка продукта_**; и
2. **_Дизайн продукта_**

Первый процесс происходит при разработке продукта или при переосмыслении существующего продукта. Второй процесс является непрерывным, эволюционным и выполняется гибким способом, близким к тому, на котором пишется код.

## Принципы безопасности

### 1. Принцип наименьших привилегий и разделения обязанностей

Принцип наименьших привилегий - это принцип безопасности, который гласит, что пользователям должен быть предоставлен только минимальный объем доступа, необходимый для выполнения их работы. Это означает, что пользователям должен быть предоставлен доступ только к тем ресурсам, которые необходимы им для выполнения их работы, и не более того. Это помогает снизить риск несанкционированного доступа к конфиденциальным данным или системам, поскольку пользователи могут получить доступ только к тем ресурсам, которые им необходимы. Принцип наименьших привилегий - важный принцип безопасности, которому следует следовать для обеспечения безопасности данных и систем организации.

Разделение обязанностей является основополагающим принципом внутреннего контроля в бизнесе и организациях. Это система сдержек и противовесов, которая гарантирует, что ни один человек не контролирует все аспекты транзакции. Это достигается путем назначения разных задач разным людям, чтобы ни один человек не контролировал весь процесс. Это помогает снизить риск мошенничества и ошибок, а также обеспечивает своевременное выполнение всех задач. Разделение обязанностей является важной частью системы внутреннего контроля любой организации и имеет важное значение для поддержания целостности финансовой отчетности организации.

### 2. Принцип глубокой защиты (Defense-in-Depth)

Принцип глубокой защиты - это стратегия безопасности, которая включает в себя несколько уровней контроля безопасности для защиты активов организации. Она основана на идее, что если один уровень безопасности выходит из строя, другие уровни все равно смогут защитить активы. Уровни безопасности могут включать физическую безопасность, сетевую безопасность, безопасность приложений и безопасность данных. Целью комплексной защиты является создание защищенной среды, устойчивой к атакам и способной быстро обнаруживать любые инциденты безопасности и реагировать на них. Внедряя несколько уровней безопасности, организации могут снизить риск успешной атаки и свести к минимуму ущерб, причиняемый любой успешной атакой.

### 3. Принцип нулевого доверия

Нулевое доверие - это модель безопасности, которая предполагает, что все пользователи, устройства и сети не заслуживают доверия и должны быть проверены перед предоставлением доступа. Она основана на идее, что организации не должны доверять никаким пользователям, устройствам или сетям, даже если они находятся внутри сети организации. Вместо этого все запросы на доступ должны быть аутентифицированы и авторизованы перед предоставлением доступа. Нулевое доверие также требует от организаций постоянного мониторинга и аудита активности пользователей, чтобы гарантировать, что доступ предоставляется только тем, кто в нем нуждается. Эта модель разработана для снижения риска утечки данных и других инцидентов безопасности за счет обеспечения того, чтобы только авторизованные пользователи имели доступ к конфиденциальным данным.

### 4. Принцип Security-in-the-Open

Концепция Security-in-the-Open подчеркивает важность безопасности при разработке программного обеспечения с открытым исходным кодом. Она направлена на то, чтобы разработчики осознавали последствия своего кода для безопасности и предпринимали шаги для обеспечения безопасности своего кода. Это включает в себя использование методов безопасного программирования, тестирование на наличие уязвимостей и использование безопасных инструментов разработки. Программа Security-in-the-Open также поощряет разработчиков сотрудничать с экспертами по безопасности, чтобы обеспечить безопасность своего кода.

## Приоритетные области обеспечения безопасности

### 1. Контекст

Как рассматриваемое приложение вписывается в экосистему организации, какие отделы его используют и по какой причине? Какие типы данных оно может содержать и каков в результате профиль рисков?

Процессы, используемые для создания контекста безопасности для приложения, включают [Моделирование угроз](Threat_Modeling_Cheat_Sheet.md), что приводит к добавлению историй, связанных с безопасностью, во время **_Дизайн продукта_** на каждой итерации *доставки продукта*, а также при проведении оценки влияния на бизнес, что приводит к установке правильного Уровни безопасности продукта для данного продукта во время **_Разработки продукта_**.

Контекст очень важен, потому что чрезмерная проработка вопросов безопасности может привести к еще большим финансовым последствиям, чем чрезмерная проработка масштабов или производительности, но недостаточная проработка также может иметь разрушительные последствия.

### 2. Компоненты

Начиная с библиотек, используемых приложением (выбранных на любом этапе **_Дизайна продукта_**), и заканчивая внешними службами, которые оно может использовать (изменения в которых происходят во время **_Разработки продукта_**), из чего состоит это приложение и как обеспечивается безопасность этих частей? Для этого мы используем библиотеку шаблонов безопасного проектирования и готовых к использованию компонентов, определенных в вашей документации Golden Path / Paved Road, и анализируем эти варианты с помощью [Моделирования угроз](Threat_Modeling_Cheat_Sheet.md).

Часть этого обзора компонентов также должна включать в себя более коммерческие аспекты выбора правильных компонентов (лицензирование и техническое обслуживание), а также ограничения на использование, которые могут потребоваться.

### 3. Связи

Как вы взаимодействуете с этим приложением и как оно подключается к упомянутым ранее компонентам и службам? Где хранятся данные и как осуществляется доступ к ним? Подключениями также можно описать любое намеренное отсутствие подключений. Подумайте о разделении уровней, которое может потребоваться в зависимости от требуемых уровней безопасности продукта, и о возможном разделении данных или целых сред, если это потребуется для разных клиентов.

Добавление (или удаление) подключений, вероятно, является признаком того, что происходит **_Разработка продукта_**.

### 4. Код

Код - это конечное выражение замысла продукта, и как таковой он должен быть функциональным в первую очередь. Но качество предоставления этой функциональности должно соответствовать ожиданиям или превосходить их.

Некоторые основы безопасного кодирования включают в себя:

   1. Проверка правильности ввода: перед обработкой убедитесь, что все входные данные корректны и соответствуют ожидаемому типу, формату и длине. Это может помочь предотвратить такие атаки, как SQL-инъекция и переполнение буфера.
   2. Обработка ошибок: Обрабатывайте ошибки и исключения безопасным способом, например, регистрируя их безопасным способом и не раскрывая конфиденциальную информацию злоумышленнику.
   3. Аутентификация и авторизация: Внедрите надежные механизмы аутентификации и авторизации, чтобы гарантировать, что только авторизованные пользователи смогут получить доступ к конфиденциальным данным и ресурсам.
   4. Криптография: Используйте криптографические функции и протоколы для защиты передаваемых и сохраняемых данных, такие как HTTPS и шифрование. Ожидаемые уровни безопасности для данного продукта часто можно найти, просмотрев документацию Golden Path / Paved Road.
   5. Наименьшие привилегии: при написании кода используйте принцип наименьших привилегий, чтобы коду и системе, в которой он выполняется, были предоставлены минимальные права доступа, необходимые для выполнения их функций.
   6. Безопасное управление памятью: Используйте языки высокого уровня, рекомендованные в документации по Golden Path / Paved Road, или правильно управляйте памятью, чтобы предотвратить уязвимости, связанные с памятью, такие как переполнение буфера и неиспользование после освобождения.
   7. Избегайте использования жестко закодированный секретов: в коде следует избегать использования жестко закодированный секретов, таких как пароли и ключи шифрования, и хранить их в защищенном хранилище.
   8. Тестирование безопасности: Тестируйте программное обеспечение на наличие уязвимостей в системе безопасности во время разработки и непосредственно перед развертыванием.
   9. Аудит и проверка кода: Регулярно проводите аудит и проверяйте код на наличие уязвимостей в системе безопасности, например, с помощью автоматизированных средств или с привлечением третьей стороны для проверки кода.
   10. Постоянное обновление: Обновляйте код с учетом последних рекомендаций по обеспечению безопасности и исправлений уязвимостей, чтобы обеспечить максимальную безопасность программного обеспечения.

Убедитесь, что вы интегрировали проверки достоверности на каждом уровне вашего приложения (например, от интерфейса до серверной части), и убедитесь, что вы написали модульные и интеграционные тесты для проверки всех угроз, обнаруженных в ходе [Моделирования угроз].(Threat_Modeling_Cheat_Sheet.md ) были снижены до уровня риска, приемлемого для организации. Используйте это для составления сценариев использования и [случаев злоупотребления](Abuse_Case_Cheat_Sheet.md) для каждого уровня вашего приложения.

### 5. Конфигурация

Безопасное создание приложения может быть легко отменено, если оно не настроено должным образом. Как минимум, мы должны обеспечить следующее:

1. Принимая во внимание принцип наименьших привилегий: ограничьте доступ и разрешения системных компонентов и пользователей до минимума, необходимого для выполнения их задач.
2. Не забывайте об углубленной защите: реализуйте несколько уровней контроля безопасности для защиты от широкого спектра угроз.
3. Обеспечение безопасности по умолчанию: Настройте системы и программное обеспечение таким образом, чтобы они были защищены по умолчанию, с минимальными затратами на ручную настройку.
4. Защищенные данные: Защищайте конфиденциальные данные, такие как личная информация и финансовые данные, шифруя их при передаче и хранении. Защита этих данных также означает обеспечение их надлежащего резервного копирования и настройки режима хранения данных в соответствии с требуемым уровнем безопасности продукта.
5. Планируйте безопасный сбой конфигурации: проектируйте системы так, чтобы они выходили из строя в защищенном состоянии, а не выявляли уязвимости при сбоях в работе.
6. Всегда используйте безопасные средства связи: Используйте безопасные протоколы для связи, такие как HTTPS, для защиты от подслушивания и несанкционированного доступа.
7. Выполняйте регулярные обновления или используйте [поддерживаемые образы] (https://www.cisecurity.org/cis-hardened-images): Обновление программного обеспечения, образов docker и базовых операционных систем с помощью [последних исправлений безопасности] (https://csrc.nist.gov/publications/detail/sp/800-40/rev-4/final) является важной частью обеспечения безопасности системы.
8. Наличие отработанного плана реагирования на инциденты безопасности: Наличие плана реагирования на инциденты безопасности имеет важное значение для минимизации ущерба, причиняемого любой успешной атакой, и является важной частью модели поддержки продукта.

Подробную информацию о том, как точно обеспечить безопасную конфигурацию, можно найти в [Шпаргалке по безопасности инфраструктуры как кода](Infrastructure_as_Code_Security_Cheat_Sheet.md)
